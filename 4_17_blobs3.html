<!DOCTYPE html>
<html>
 <head>
 <meta charset="utf-8">
 <title>Soundcloud Viz</title>
 <script src='http://connect.soundcloud.com/sdk.js'></script>
 <script language="javascript" src="js/creative.js"></script>
<script language="javascript" src="js/canvas.js"></script>

	<link rel="stylesheet" href="css/reset.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="css/audio.css" type="text/css" media="screen" />
 </head>
 <body>
   
<script>
// was getting annoyed with the same track playing, so changed soundcloud function to play random track
var ctx = createCanvas("canvas1");
ctx.strokeStyle = rgb(0,0,0);

var particles = [];
var radius = 50;
var num_particles = 8;
var cols = ['#fdea00', '#50bfe8', '#f06724', '#8cc640'];
var angle = 360/num_particles;
var circ_sz = 300;
var t_size = 350;
var top_offset = 0;

var s1 = 1;
var s2 = -1;
var extra = -6;
var rr = 0;
var t_size = 2;
var rot = 0;
var radius =200;
var r = 0;

function draw(){
	
	rr+=0.01;
	// var x = Math.sin(r)*220;

	rot = tween(rot, radians(map(audioChannelVolume[20],0,150, -4, 20))/50, 20);
	r = tween(r, Math.sin(rot*120)*100, 18);
	x = w/2;
	y= h/2;

	ctx.fillStyle = rgb(250);
	ctx.fillRect(0, 0, w, h);

	ctx.lineWidth = 5;

	// var c=0.551915024494;
	var c = r/100;


ctx.translate(w/2,h/2);
ctx.rotate(rot/2);
drawBez(c*0.6, r*0.6);
ctx.rotate(-rot/2);
ctx.rotate(rot/10);
drawBez(c*0.8, r*0.8);
ctx.rotate(-rot/10);
ctx.rotate(rot/4);
drawBez(c, r);
ctx.rotate(rot/5);
drawBez(c*1.2, r*1.2);
ctx.rotate(rot/6);
drawBez(c*1.4, r*1.4);
ctx.translate(-w/2,-h/2);

}


function drawBez(c, r){
	drawCBez(0,-r, c*r,-r, r,-c*r, r,0 ,'black');
	drawCBez(r,0, r,c*r, c*r,r, 0,r, 'black');
	drawCBez(0,r, -c*r,r, -r,c*r, -r,0, 'black');
	drawCBez(-r,0, -r,-c*r, -c*r,-r, 0,-r, 'black');
}

function drawCBez(x0,y0,x1,y1,x2,y2,x3,y3,color){
  ctx.beginPath();
  ctx.moveTo(x0,y0);
  ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3);
  ctx.strokeStyle=color;
  ctx.stroke();
};

</script>
 <script language="javascript" src="js/soundcloud.js"></script>
 <script>document.write('<script src="http://' + (location.host || '${1:localhost}').split(':')[0] + ':${2:35729}/livereload.js?snipver=1"></' + 'script>')</script>
</body>
</html>
