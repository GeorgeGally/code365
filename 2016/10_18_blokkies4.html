<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <!-- <script src='http://connect.soundcloud.com/sdk.js'></script> -->
  <script language="javascript" src="../js/creative_coding.js"></script>
  <script language="javascript" src="../js/canvas.js"></script>
  <script language="javascript" src="../js/vector.js"></script>
  <script language="javascript" src="../js/vector_particles.js"></script>

  <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="../css/audio.css" type="text/css" media="screen" />

</head>

<body>

<script>

var ctx = createCanvas("canvas1");
var grid_w = 200;
var grid_h = 200;
var grid = createGrid(grid_w, grid_h);

var blocks = new particleEngine(grid.length-1);
var speed = random(1+i/2);
for (var i = 0; i < blocks.particles.length; i++) {
  var b = blocks.particles[i];
  b.position = new Vector(grid[i].x, grid[i].y);
  b.c =  (chance(2)) ? rgb(255): rgb(0);
  b.w = w/grid_w;
  b.h = h/grid_h;
  if (b.me > grid_w) {
    b.speed = blocks.particles[b.me-grid_w].speed;
  } else{
    if (i%4 == 0 && i > 4) {
      b.speed = blocks.particles[b.me-4].speed;
    } else {
      speed = random(1);
      b.speed = new Vector(0,speed);
    }

  }

}

function draw(){
  ctx.background(255);
  blocks.draw();
  for (var i = 0; i < blocks.particles.length; i++) {
    var b = blocks.particles[i];
    ctx.fillStyle = b.c;
    ctx.fillRect(b.position.x, b.position.y, b.w, b.w);
    if(chance(20)) b.position.y += random(10);
  }
}


</script>
<!-- <script language="javascript" src="../js/soundcloud.js"></script> -->
</body>

</html>
