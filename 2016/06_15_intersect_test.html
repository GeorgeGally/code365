<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Soundcloud Viz</title>
<!-- <script src='http://connect.soundcloud.com/sdk.js'></script> -->
<script language="javascript" src="../js/creative_coding.js"></script>
<script language="javascript" src="../js/canvas.js"></script>
<script language="javascript" src="../js/toxiclibs.js"></script>
<script language="javascript" src="../js/jquery-1.6.2.js"></script>
<script language="javascript" src="../js/simplex-noise.js"></script>

	<link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../css/audio.css" type="text/css" media="screen" />

</head>
 <body style="background: #111">
   
<script>

var ctx = createCanvas("canvas1");

var seed = window.location.hash.substr(1) || String(Math.random()).split('.')[1]
var r = random( seed )
var simplex = new SimplexNoise( r )
var simplex3 = simplex.noise3D.bind(simplex)

var config = {
    margin: 0.9,
    activeLines : 10,
    line_width: 4,
    random : random,
    simplex3 : simplex3,
    maxAngle : Math.PI * 0.2,
    lineLength : 3,
    simplexScale : 0.6,
    simplexDepthScale : 0.001,
  }

var x1 = random(w);
var x2 = random(w);
var y1 = random(h);
var  y2 = random(h);

var x3 = random(w);
var x4 = random(w);
var y3 = random(h);
var y4 = random(h);
var s = rgb(randomInt(255), randomInt(255), randomInt(255));
var lines = [];
var active_lines = [];
var was_hit, hit, curr_line_width; 
var simplex = new SimplexNoise();
ctx.moveTo(w/2, h/2);


// ctx.shadowBlur = 3;
// ctx.shadowColor = "white";





var t = 0;
var curve, change;
ctx.strokeStyle = "green";

function draw() {


  //if (chance(20)) change = random(-0.0002, 0.0002);
  if (chance(100)) {
    ctx.clearRect(0,0,w,h);
    ctx.strokeStyle = "blue";
    x1 = random(w);
    x2 = random(w);
    y1 = random(h);
    y2 = random(h);

    x3 = random(w);
    x4 = random(w);
    y3 = random(h);
    y4 = random(h);
  }

checkHit();

  ctx.line(x1, y1, x2, y2);

  ctx.line(x3, y3, x4, y4);
  //ctx.arcTo(x1, y1, x2, y2, radius);
  
  

 
}

function checkHit(){
    
      hit = checkIntersection( x1, y1, x2, y2, x3, y3, x4, y4 );
      if (hit!= undefined && hit!= false) {
        // console.log("x1: " + x1 + "y1: " + y1 );
        // console.log("x2: " + x2 + "y2: " + y2 );
        ctx.strokeStyle = "red";
      }


}


</script>
<!--  <script language="javascript" src="../js/soundcloud.js"></script> -->
</body>
</html>
